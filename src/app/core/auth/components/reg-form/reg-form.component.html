<h1>Sign up</h1>

<form class="auth-form"
      [formGroup]="regForm"
      (ngSubmit)="onSubmit()">

  <div class="form-group">
    <label>
      <small class="form-text text-muted">User name</small>
      <input class="form-control"
             [formControlName]="RegFormControl.username"
             type="text"
             required>
    </label>
    @if (isControlInvalid(RegFormControl.username)) {
      <div class="invalid-feedback error">{{ getControlErrorMessage(RegFormControl.username, regForm) }}</div>
    }
  </div>

  <div class="form-group">
    <label>
      <small class="form-text text-muted">Password</small>
      <input class="form-control"
             [formControlName]="RegFormControl.password"
             type="password"
             required>
    </label>
    @if (isControlInvalid(RegFormControl.password)) {
      <div class="invalid-feedback error">{{ getControlErrorMessage(RegFormControl.password, regForm) }}</div>
    }
  </div>

  <div class="form-group">
    <label>
      <small class="form-text text-muted">Confirm password</small>
      <input class="form-control"
             [formControlName]="RegFormControl.confirmPassword"
             type="password"
             required>
    </label>
    @if (isControlInvalid(RegFormControl.confirmPassword)) {
      <div class="invalid-feedback error">{{ getControlErrorMessage(RegFormControl.confirmPassword, regForm) }}</div>
    }
  </div>

  @if (regForm.errors?.['matchPasswords']) {
    <p>Passwords don't match</p>
  }

  @if (authError$ | async; as error) {
    <div class="invalid-feedback error">{{ error }}</div>
  }

  <button class="btn btn-primary btn-action"
          [disabled]="!regForm.valid">Sign up
  </button>

</form>

<p>Already have an account? <a class="link-info" routerLink="/auth/login">Log in</a></p>

